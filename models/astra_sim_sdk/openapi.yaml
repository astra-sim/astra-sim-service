openapi: 3.0.3
info:
  title: ASTRA-sim APIs
  version: 1.0.0
  description: |-
    The ASTRA-sim API provides a standardized interface for submitting configurations, executing jobs, checking job status, and retrieving results.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: /
paths:
  /upload_config:
    post:
      tags:
      - Configuration
      operationId: upload_config
      summary: Uploads workload execution traces in a .zip file. The set_config endpoint
        must be called to validate the uploaded workloads and to configure additional
        parameters defined in the config schema, which is a part of the set_config
        request.
      x-stream: client
      requestBody:
        required: true
        description: |-
          The uploaded file is a ZIP archive that contains execution traces packaged together in ZIP format.
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
            x-field-uid: 1
      responses:
        '200':
          $ref: '#/components/responses/Success'
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
  /set_config:
    post:
      tags:
      - Configuration
      operationId: set_config
      x-stream: client
      summary: The set_config API accepts a configuration payload containing schemas
        for various settings, allowing users to create configuration using schema
        definitions. It validates the uploaded workloads from the upload_config API,
        then generates files from the configurations. This process effectively applies
        and activates the configuration on the server.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Config'
      responses:
        '200':
          $ref: '#/components/responses/Success'
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
  /get_config:
    post:
      tags:
      - Configuration
      operationId: get_config
      summary: Downloads the current active configuration as a packaged ZIP archive
        containing all the workloads and generated configuration files.
      x-stream: server
      responses:
        '200':
          description: |-
            Downloads the currently active configuration files from the server in .zip format.
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
  /get_status:
    post:
      tags:
      - Control
      summary: Retrieves the simulation status, which can be failed, completed, running,
        terminated, or inactive.
      operationId: get_status
      responses:
        '200':
          description: |-
            Simulation status [failed, completed, running, inactive, terminated].
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Control.Status'
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
  /set_control_action:
    post:
      tags:
      - Control
      operationId: set_control_action
      summary: Sets the simulation state to either start or stop.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Control'
      responses:
        '200':
          $ref: '#/components/responses/Success'
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
  /result:
    post:
      tags:
      - Result
      summary: List result files for a completed simulation job
      operationId: get_result
      x-stream: server
      requestBody:
        required: true
        description: |-
          In the result API payload, the user can choose to provide either a filename or a metadata. When a metadata is provided, the server returns metadata about the generated result files. If a filename is specified, the corresponding file will be downloaded. Filenames can be obtained from the metadata returned by the server when using the metadata option.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Result'
      responses:
        '200':
          description: |-
            List of simulation result files.
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
  /capabilities/version:
    get:
      tags:
      - Capabilities
      operationId: get_version
      responses:
        '200':
          description: |-
            Version details from API server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Version'
          x-field-uid: 1
        default:
          $ref: '#/components/responses/Failure'
          x-field-uid: 2
components:
  responses:
    Success:
      description: "The request has succeeded with a response message and  the server\
        \ \nmay return a list of detailed warnings."
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ServerResponse'
    Failure:
      description: |-
        The request did not succeed and server has responded with error details.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    Error:
      description: |-
        Error response generated while serving API request.
      type: object
      required:
      - code
      - errors
      properties:
        code:
          description: |-
            Numeric status code based on the underlying transport being used.
            The API server MUST set this code explicitly based on following references:
              - HTTP 4xx errors: https://datatracker.ietf.org/doc/html/rfc9110#section-15.5
              - HTTP 5xx errors: https://datatracker.ietf.org/doc/html/rfc9110#section-15.6
              - gRPC errors: https://grpc.github.io/grpc/core/md_doc_statuscodes.html
          type: integer
          format: int32
          x-field-uid: 1
        kind:
          description: |-
            Classification of error originating from within API server that may not be mapped to the value in `code`.
            Absence of this field may indicate that the error did not originate from within API server.
          type: string
          x-enum:
            validation:
              x-field-uid: 1
            internal:
              x-field-uid: 2
          x-field-uid: 2
          enum:
          - validation
          - internal
        errors:
          description: |-
            List of error messages generated while executing the request.
          type: array
          items:
            type: string
          x-field-uid: 3
    ServerResponse:
      description: |-
        A list of warnings that have occurred while executing the request.
      type: object
      properties:
        message:
          type: string
          description: |-
            Server Response Message
          x-field-uid: 1
        warnings:
          description: "A list of any system specific warnings that have occurred\
            \ while \nexecuting the request."
          type: array
          items:
            type: string
          x-field-uid: 2
    Config:
      type: object
      properties:
        common_config:
          $ref: '#/components/schemas/Common.Configuration'
          x-field-uid: 1
        network_backend:
          $ref: '#/components/schemas/Network.Backend'
          x-field-uid: 2
        infragraph:
          $ref: '#/components/schemas/Infragraph'
          x-field-uid: 3
    Common.Configuration:
      type: object
      description: |-
        Holds the schemas that define ASTRA-sim configurations common to all backends, including workload, system, communicator group, logging, remote memory, and command parameters.
      properties:
        workload:
          type: string
          description: |-
            Specifies the path containing workload configuration data as part of the uploaded .zip package. This field holds the folder/filename (excluding the `.rankid.et` suffix).
          x-field-uid: 1
        system:
          $ref: '#/components/schemas/System.Configuration'
          description: |-
            Holds the ASTRA-sim system configuration schema, allowing users to generate system configurations based on the schema.
          x-field-uid: 2
        communicator_group:
          type: array
          items:
            $ref: '#/components/schemas/Communicator.Group'
          description: |-
            Holds the ASTRA-sim communicator group configuration schema, allowing users to generate communicator group configurations based on the schema.
          x-field-uid: 3
        remote_memory:
          $ref: '#/components/schemas/RemoteMemory'
          description: |-
            Holds the ASTRA-sim remote memory configuration schema, allowing users to define and create remote memory configurations.
          x-field-uid: 4
        logging:
          $ref: '#/components/schemas/SpdlogConfig'
          description: |-
            Holds the logging configuration schema, allowing users to generate a TOML-based spdlog configuration file.
          x-field-uid: 5
        cmd_parameters:
          $ref: '#/components/schemas/Command.Arguments'
          description: |-
            Contains the command parameters schema, allowing users to define and set command line argument values.
          x-field-uid: 6
    Command.Arguments:
      type: object
      x-astra-sim-type: schema
      description: |-
        Command Line Arguments that are common to the ASTRA-sim binary.
      properties:
        num_queues_per_dim:
          type: integer
          format: uint32
          description: |-
            The num-queues-per-dim parameter specifies the number of communication queues allocated per network dimension, with a default value of 1.
          default: 1
          x-field-uid: 1
          x-astra-sim-name: --num-queues-per-dim
          x-astra-sim-type: cmd
        comm_scale:
          type: number
          format: double
          description: |-
            The comm-scale parameter is a scaling factor applied to communication operations, with a default value of 1.0.
          default: 1.0
          x-field-uid: 2
          x-astra-sim-name: --comm-scale
          x-astra-sim-type: cmd
        injection_scale:
          type: number
          format: double
          description: |-
            The injection-scale parameter scales injection delays and endpoint communication delays, with a default value of 1.0.
          default: 1.0
          x-field-uid: 3
          x-astra-sim-name: --injection-scale
          x-astra-sim-type: cmd
        rendezvous_protocol:
          type: boolean
          description: |-
            The rendezvous-protocol parameter enables or disables the rendezvous communication protocol, with a default value of false.
          default: false
          x-field-uid: 4
          x-astra-sim-name: --rendezvous-protocol
          x-astra-sim-type: cmd
    Network.Backend:
      type: object
      description: |-
        A choice of network backends of ASTRA-sim which will run the simulation.
      properties:
        choice:
          description: |-
            Specifies the network backend to use for the simulation. Supported options include the analytical congestion-aware or congestion-unaware models, the NS3 discrete-event simulator, and the htsim high-performance simulator.
          type: string
          x-field-uid: 1
          x-enum:
            analytical_congestion_aware:
              x-field-uid: 1
            analytical_congestion_unaware:
              x-field-uid: 2
            ns3:
              x-field-uid: 3
            htsim:
              x-field-uid: 4
          enum:
          - analytical_congestion_aware
          - analytical_congestion_unaware
          - ns3
          - htsim
        analytical_congestion_aware:
          $ref: '#/components/schemas/Analytical.Configuration'
          x-field-uid: 2
        analytical_congestion_unaware:
          $ref: '#/components/schemas/Analytical.Configuration'
          x-field-uid: 3
        ns3:
          $ref: '#/components/schemas/NS3.Configuration'
          x-field-uid: 4
        htsim:
          $ref: '#/components/schemas/HTSim.Configuration'
          x-field-uid: 5
    Infragraph:
      type: object
      description: |
        InfraGraph or infrastructure graph defines a model-driven, vendor-neutral, standard interface for capturing a system of systems suitable for use in co-designing AI/HPC solutions.
        This model allows for defining physical infrastructure as a logical system of systems using graph like terminology. In addition to defining a logical graph, an unlimited number of different physical characteristics can be associated with logical endpoints.
      properties:
        infrastructure:
          $ref: '#/components/schemas/Infrastructure'
          description: |-
            The infrastructure model representing the current version (v0.4.1) of InfraGraph schema
          x-field-uid: 1
        annotations:
          $ref: '#/components/schemas/Annotations'
          description: |-
            Additional annotations to enrich infrastructure data, used by Astra Sim backend network topologies and other components
          x-field-uid: 2
    System.Configuration:
      type: object
      x-astra-sim-type: schema
      description: |-
        Defines ASTRA-sim core system configuration parameters used to control simulation behavior. This includes scheduling policies, collective communication algorithms, key performance metrics, and advanced features like roofline modeling and execution tracing. Users can specify these settings directly via a structured schema for precise and flexible simulation setup.
      properties:
        scheduling_policy:
          type: string
          enum:
          - LIFO
          - FIFO
          - EXPLICIT
          default: LIFO
          description: |-
            The order we proritize collectives according based on their time of arrival. LIFO means that most recently created collectives have higher priority. While FIFO is the reverse.
          x-field-uid: 1
          x-astra-sim-name: scheduling-policy
        all_reduce_implementation:
          type: array
          items:
            type: string
            enum:
            - ring
            - oneRing
            - doubleBinaryTree
            - direct
            - oneDirect
          minItems: 1
          maxItems: 3
          default:
          - ring
          description: |-
            (Dimension0Collective_Dimension1Collective_xxx_DimensionNCollective)
            Here we can create a multiphase colective all-reduce algorithm and directly specify the collective algorithm type for each logical dimension. The available options (algorithms) are: ring, direct, doubleBinaryTree, oneRing, oneDirect.
            For example, “ring_doubleBinaryTree” means we create a logical topology with 2 dimensions and we perform ring algorithm on the first dimension followed by double binary tree on the second dimension for the all-reduce pattern. Hence the number of physical dimension should be equal to the number of logical dimensions. The only exceptions are oneRing/oneDirect where we assume no matter how many physical dimensions we have, we create a one big logical ring/direct(AllToAll) topology where all NPUs are connected and perfrom a one phase ring/direct algorithm.
          x-field-uid: 2
          x-astra-sim-name: all-reduce-implementation
        reduce_scatter_implementation:
          type: array
          items:
            type: string
            enum:
            - ring
            - oneRing
            - direct
            - oneDirect
          minItems: 1
          maxItems: 3
          default:
          - ring
          description: |-
            (Dimension0CollectiveAlg_Dimension1CollectiveAlg_xxx_DimensionNCollectiveAlg)
            The same as all-reduce-implementation - but for reduce-scatter collective. The available options are: ring, direct, oneRing, oneDirect.
          x-field-uid: 3
          x-astra-sim-name: reduce-scatter-implementation
        all_gather_implementation:
          type: array
          items:
            type: string
            enum:
            - ring
            - oneRing
            - direct
            - oneDirect
          minItems: 1
          maxItems: 3
          default:
          - ring
          description: |-
            (Dimension0CollectiveAlg_Dimension1CollectiveAlg_xxx_DimensionNCollectiveAlg)
            The same as all-reduce-implementation - but for all-gather collective. The available options (algorithms) are: ring, direct, oneRing, oneDirect.
          x-field-uid: 4
          x-astra-sim-name: all-gather-implementation
        all_to_all_implementation:
          type: array
          items:
            type: string
            enum:
            - ring
            - oneRing
            - direct
            - oneDirect
          minItems: 1
          maxItems: 3
          default:
          - ring
          description: |-
            (Dimension0CollectiveAlg_Dimension1CollectiveAlg_xxx_DimensionNCollectiveAlg)
            The same as all-reduce-implementation - but for all-to-all collective. The available options (algorithms) are: ring, direct, oneRing, oneDirect.
          x-field-uid: 5
          x-astra-sim-name: all-to-all-implementation
        all_to_all_implementation_custom:
          type: array
          items:
            type: string
          description: |-
            This parameter specifies a Chakra Execution Trace (ET) file path for implementing AllToAll collective operations, requiring exactly one ET file that covers all dimensions in multi-dimensional collectives.
          x-field-uid: 6
          x-astra-sim-name: all-to-all-implementation-custom
        all_gather_implementation_custom:
          type: array
          items:
            type: string
          description: |-
            This parameter defines a Chakra ET file path for AllGather collective operations, following the same single-file requirement for multi-dimensional scenarios.
          x-field-uid: 7
          x-astra-sim-name: all-gather-implementation-custom
        all_reduce_implementation_custom:
          type: array
          items:
            type: string
          description: |-
            This parameter specifies a Chakra ET file for AllReduce operations, also requiring exactly one ET file to cover all dimensions in the collective implementation.
          x-field-uid: 8
          x-astra-sim-name: all-reduce-implementation-custom
        collective_optimization:
          type: string
          enum:
          - baseline
          - localBWAware
          description: |-
            baseline issues allreduce across all dimensions to handle allreduce of single chunk. While for an N-dimensional network, localBWAware issues a series of reduce-scatters on all dimensions from dim1 to dimN-1, followed by all-reduce on dimN, and then series of all-gathers starting from dimN-1 to dim1. This optimization is used to reduce the chunk size as it goes to the next network dimensions.
          default: localBWAware
          x-field-uid: 9
          x-astra-sim-name: collective-optimization
        local_reduction_delay:
          type: integer
          description: |-
            The local_reduction_delay parameter specifies the delay for local reduction operations during collective communications, with a default value of 1.
          default: 0
          x-field-uid: 10
          x-astra-sim-name: local-reduction-delay
        active_chunks_per_dimension:
          type: integer
          description: |-
            This corresponds to the Maximum number of chunks we like execute in parallel on each logical dimesnion of topology.
          default: 1
          x-field-uid: 11
          x-astra-sim-name: active-chunks-per-dimension
        latency:
          type: number
          format: float
          description: |-
            Translates to L - Latency parameter for memory operations.
          x-field-uid: 12
          x-astra-sim-name: L
        overhead:
          type: number
          format: float
          description: |-
            Translates to o - Overhead parameter for memory transactions.
          x-field-uid: 13
          x-astra-sim-name: o
        gap:
          type: number
          format: float
          description: |-
            Translates to g - Gap parameter between memory operations.
          x-field-uid: 14
          x-astra-sim-name: g
        global_memory:
          type: number
          format: float
          description: |-
            Translates to G - Global memory parameter or bandwidth-related setting.
          x-field-uid: 15
          x-astra-sim-name: G
        endpoint_delay:
          type: integer
          description: |-
            The time NPU spends processing a message after receiving it in terms of cycles.
          x-field-uid: 16
          default: 0
          x-astra-sim-name: endpoint-delay
        model_shared_bus:
          type: integer
          description: |-
            The local_reduction_delay parameter specifies the delay for local reduction operations during collective communications, with a default value of 1.
          x-field-uid: 17
          x-astra-sim-name: model-shared-bus
        preferred_dataset_splits:
          type: integer
          description: |-
            The preferred_dataset_splits parameter controls how datasets are divided for collective operations, with a default value of 0.
          default: 1
          minimum: 0
          x-field-uid: 18
          x-astra-sim-name: preferred-dataset-splits
        peak_perf:
          type: number
          format: double
          description: |-
            The peak_perf parameter specifies the peak computational performance in TFLOPS, with a default value of 0.
          minimum: 0
          x-field-uid: 19
          x-astra-sim-name: peak-perf
        local_mem_bw:
          type: number
          format: double
          description: |-
            The local_mem_bw parameter defines the local memory bandwidth in GB/sec, with a default value of 0.
          minimum: 0
          default: 50
          x-field-uid: 20
          x-astra-sim-name: local-mem-bw
        roofline_enabled:
          type: integer
          description: |-
            The roofline_enabled parameter is a boolean flag that enables roofline performance modeling, defaulting to false. When enabled, it creates a Roofline instance using the specified local_mem_bw and peak_perf parameters for realistic performance modeling.
          minimum: 0
          x-field-uid: 21
          x-astra-sim-name: roofline-enabled
        trace_enabled:
          type: integer
          description: |-
            The trace_enabled parameter controls whether execution tracing is enabled during simulation, defaulting to false. When enabled, it activates detailed logging throughout the workload execution for debugging and analysis purposes.
          minimum: 0
          default: 0
          x-field-uid: 22
          x-astra-sim-name: trace-enabled
        replay_only:
          type: integer
          description: |-
            The replay_only parameter is a boolean flag that skips actual simulation and uses current duration values, defaulting to false. When enabled, it bypasses normal simulation execution and directly processes workload nodes without timing simulation.
          minimum: 0
          x-field-uid: 23
          x-astra-sim-name: replay-only
        track_local_mem:
          type: integer
          minimum: 0
          x-field-uid: 24
          x-astra-sim-name: track-local-mem
        local_mem_trace_filename:
          type: string
          x-field-uid: 25
          x-astra-sim-name: local-mem-trace-filename
    Communicator.Group:
      type: object
      x-astra-sim-type: schema
      description: |-
        Defines the communication group configuration for ASTRA-sim, enabling users to specify process group memberships and related NPUs within a structured schema.
      properties:
        identifier:
          type: string
          description: |-
            Represents a unique identifier for a communication group. This ID is used to distinguish different groups of NPUs that participate together in collective communication operations.
          x-field-uid: 1
        npu_list:
          type: array
          items:
            type: integer
          description: |-
            Contains the list of NPU IDs that belong to the communication group identified by the process ID. Each NPU listed is a member of this group and will participate in collective operations such as AllReduce and AllGather with the other NPUs in the same group.
          x-field-uid: 2
    RemoteMemory:
      type: object
      x-astra-sim-type: schema
      description: |-
        Defines the remote memory configuration parameters for ASTRA-sim, enabling direct specification of memory subsystem settings via a structured schema. This includes memory access patterns, latency, and bandwidth characteristics that influence how tensor loads, stores, and other memory operations are simulated. Users can utilize this schema to create detailed remote memory configurations for accurate and flexible workload modeling.
      properties:
        memory_type:
          type: string
          enum:
          - NO_MEMORY_EXPANSION
          - PER_NODE_MEMORY_EXPANSION
          - PER_NPU_MEMORY_EXPANSION
          - MEMORY_POOL
          default: NO_MEMORY_EXPANSION
          description: |-
            the memory type.
          x-field-uid: 1
          x-astra-sim-name: memory-type
        remote_mem_latency:
          type: integer
          format: int32
          minimum: 0
          default: 0
          description: |-
            remote memory latency (ns).
          x-field-uid: 2
          x-astra-sim-name: remote-mem-latency
        remote_mem_bw:
          type: integer
          format: int32
          minimum: 0
          default: 0
          description: |-
            remote memory bandwidth (GB/s or B/ns).
          x-field-uid: 3
          x-astra-sim-name: remote-mem-bw
        num_nodes:
          type: integer
          format: int32
          minimum: 0
          description: |-
            number of nodes (only valid with “PER_NODE_MEMORY_EXPANSION”).
          x-field-uid: 4
          x-astra-sim-name: num-nodes
        num_npus_per_node:
          type: integer
          format: int32
          minimum: 0
          description: |-
            number of NPUs per node (only valid with “PER_NODE_MEMORY_EXPANSION”).
          x-field-uid: 5
          x-astra-sim-name: num-npus-per-node
    SpdlogConfig:
      type: object
      description: |-
        Defines the overall logging configuration used to generate a TOML-based spdlog configuration file. It specifies log sinks (output targets) and loggers (named logging instances with levels and patterns).
      properties:
        sink:
          type: array
          items:
            $ref: '#/components/schemas/Sink'
          description: |-
            List of log sinks, defining where log messages are written (e.g., files, console).
          x-field-uid: 1
        logger:
          type: array
          items:
            $ref: '#/components/schemas/Logger'
          description: |-
            List of logger configurations, each mapping to one or more sinks and defining log levels and formats.
          x-field-uid: 2
    Sink:
      type: object
      required:
      - name
      - type
      description: |-
        Defines a log sink, which represents an output destination (such as a file or console) for log messages.
      properties:
        name:
          type: string
          description: |-
            Unique identifier for the sink, used to reference it in logger definitions.
          x-field-uid: 1
        type:
          type: string
          description: |-
            Sink type (e.g., stdout_sink_mt for console, basic_file_sink_mt for file output).
          x-field-uid: 2
        filename:
          type: string
          description: |-
            File path where log messages will be written. Required when using file-based sinks.
          x-field-uid: 3
        truncate:
          type: boolean
          description: |-
            Determines whether existing files should be truncated on startup (`true`) or logs should be appended (`false`).
          x-field-uid: 4
        create_parent_dir:
          type: boolean
          description: |-
            Indicates whether parent directories should automatically be created if they do not exist.
          x-field-uid: 5
    Logger:
      type: object
      description: |-
        Defines a logger configuration, which specifies the sinks it writes to, its log level, and optional message formatting.
      properties:
        name:
          type: string
          description: |-
            Name of the logger, used to uniquely identify it.
          x-field-uid: 1
        sinks:
          type: array
          items:
            type: string
          description: |-
            List of sink names associated with this logger. Each log message is written to the defined sinks.
          x-field-uid: 2
        level:
          type: string
          enum:
          - trace
          - debug
          - info
          - warn
          - error
          - critical
          description: |-
            Minimum severity level of messages the logger will output.
          x-field-uid: 3
        pattern:
          type: string
          description: |-
            Optional message format pattern for log output (overrides the default spdlog pattern if specified).
          x-field-uid: 4
    Analytical.Configuration:
      type: object
      description: |-
        This allows user to define the analytical configuration by allowing them to select between a schema or infragraph which will be translated to schema by the server.
      properties:
        topology:
          $ref: '#/components/schemas/Analytical.Topology'
          x-field-uid: 1
    Analytical.Topology:
      type: object
      description: |-
        Provides a choice between infragraph and analytical network configuration. If analytical is selected, a schema is provided to specify analytical network values. If infragraph is selected, the user can reference the infragraph schema from the global configuration, which the server will convert into an analytical schema.
      properties:
        choice:
          description: |-
            Specifies the choice between analytical network config or infragraph.
          type: string
          x-field-uid: 1
          x-enum:
            network:
              x-field-uid: 1
            infragraph:
              x-field-uid: 2
          enum:
          - network
          - infragraph
        network:
          type: array
          description: |-
            An array of Analytical.Topology.Network which holds the topology, npus_count, bandwidth and latency. The minimum length of array is 1 and maximum is 3.
          items:
            $ref: '#/components/schemas/Analytical.Topology.Network'
          minimum: 1
          maximum: 3
          x-field-uid: 2
    Analytical.Topology.Network:
      type: object
      x-astra-sim-type: schema
      properties:
        topology:
          type: string
          description: |
            List of topology types for each dimension (in order).
          x-enum:
            ring:
              x-field-uid: 1
              x-astra-sim-name: Ring
            fullyconnected:
              x-field-uid: 2
              x-astra-sim-name: FullyConnected
            switch:
              x-field-uid: 3
              x-astra-sim-name: Switch
          x-field-uid: 1
          enum:
          - ring
          - fullyconnected
          - switch
        npus_count:
          type: integer
          description: |
            Number of NPUs (neuronal processing units) along each topology dimension.
          x-field-uid: 2
        bandwidth:
          type: number
          format: float
          description: |
            Bandwidth per dimension in GB/s.
          x-field-uid: 3
        latency:
          type: number
          format: float
          description: |
            Latency per dimension in nanoseconds (ns).
          x-field-uid: 4
      required:
      - topology
      - npus_count
      - bandwidth
      - latency
    NS3.Configuration:
      type: object
      description: |-
        The NS3 backend configuration enables users to define the NS3 backend settings using a schema-based approach. The primary configuration schemas include network (representing network settings), topology (encompassing nc_topology, logical topology, and trace information), and trace itself, allowing users to specify properties via schemas. The topology schema supports a choice between the infragraph and nc_topology schemas; when infragraph is selected, the server automatically converts the infragraph representation to the nc_topology format on the backend, streamlining the process for users.
      properties:
        network:
          $ref: '#/components/schemas/NS3.Network'
          description: |-
            The NS3 network configuration file.
          x-field-uid: 1
        topology:
          $ref: '#/components/schemas/NS3.Topology'
          description: |-
            A choice between infragraph and native nc_topology schema where the user can choose either of the one. On choosing infragraph, the infragraph gets converted to ns3 nc topology.
          x-field-uid: 2
        logical_topology:
          $ref: '#/components/schemas/NS3.Logical.Topology'
          description: |-
            The logical topology schema enables users to define the logical structure or dimensions of the ns3 topology, specifying how nodes and links are organized and interact within the simulated network environment.
          x-field-uid: 3
        trace:
          $ref: '#/components/schemas/NS3.Trace'
          description: |-
            A trace identifier schema enables users to specify the trace IDs of devices for which trace data should be generated, ensuring that only the desired device traces are collected during the simulation.
          x-field-uid: 4
    NS3.Topology:
      type: object
      description: |-
        A choice between infragraph and ns3 nc topology, where the user can choose either infragraph or nc_topology. On choosing nc_topology, the user gets a schema which allows to fill in the nc_topology values, and on choosing infragraph, the user can create infragraph from the schema which will be translated to ns3 topology at the server.
      properties:
        choice:
          description: |-
            Specifies the choice between versions of infragraph.
          type: string
          x-field-uid: 1
          x-enum:
            nc_topology:
              x-field-uid: 1
            infragraph:
              x-field-uid: 2
          enum:
          - nc_topology
          - infragraph
        nc_topology:
          $ref: '#/components/schemas/NC.Topology'
          x-field-uid: 2
    NC.Topology:
      type: object
      description: |-
        NC Topology Schema
      properties:
        total_nodes:
          type: integer
          description: |-
            The total number of nodes - total gpus + switches.
          x-field-uid: 1
        total_switches:
          type: integer
          description: |-
            The total number of switches.
          x-field-uid: 2
        total_links:
          type: integer
          description: |-
            The total number of links.
          x-field-uid: 3
        switch_ids:
          type: array
          items:
            type: integer
            minimum: 1
          description: |-
            A list containing all unique switch identifiers.
          x-field-uid: 4
        connections:
          type: array
          items:
            $ref: '#/components/schemas/NC.Topology.Connection'
          description: |-
            Holds a collection of connection entries, representing multiple links between sources and destinations.
          x-field-uid: 5
    NC.Topology.Connection:
      type: object
      description: |-
        Represents a connection entry, including source index, destination index, bandwidth, error rate, and latency.
      properties:
        source_index:
          type: integer
          format: uint32
          description: |-
            The index of the source node for this connection.
          x-field-uid: 1
        destination_index:
          type: integer
          format: uint32
          description: |-
            The index of the destination node for this connection.
          x-field-uid: 2
        bandwidth:
          type: string
          description: |-
            The maximum data transfer capacity of the connection (e.g., in Gbps). Example - 100Gbps.
          x-field-uid: 3
        latency:
          type: string
          description: |-
            The communication delay associated with the connection, typically measured in milliseconds. Example - 0.0005ms.
          x-field-uid: 4
        error_rate:
          type: string
          description: |-
            The probability of packet errors occurring over the connection.
          x-field-uid: 5
    NS3.Trace:
      type: object
      description: |-
        The trace file includes the unique identifiers of devices specified in the nc_topology file and serves as an input to the network configuration. This enables NS3 to generate trace data specifically for the provided device identifiers.
      properties:
        trace_ids:
          description: |-
            An array of all the device identifiers.
          type: array
          items:
            type: integer
            format: uint32
          x-field-uid: 1
    NS3.Logical.Topology:
      type: object
      description: |-
        The logical topology in the NS-3 backend is defined through the network configuration file, specifically using the "logical-dims" field. This field specifies the dimensions of the network topology as an array of strings, where each string represents the number of NPUs in that dimension.
      properties:
        logical_dimensions:
          description: |-
            The NS-3 logical topology configuration file serves as a blueprint for defining the high-level arrangement of network elements in an NS3 simulation. Provided as a JSON file, it primarily features a "logical-dims" field, which specifies the network’s dimensional structure by listing the number of NPUs (processing units) in each dimension as an array of strings.
          type: array
          items:
            type: integer
            format: uint32
          minItems: 1
          maxItems: 3
          x-astra-sim-name: logical-dims
          x-field-uid: 1
    NS3.Network:
      type: object
      x-astra-sim-type: schema
      description: |-
        Defines the network topology and simulation parameters for NS3-based network simulations.
      properties:
        enable_qcn:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            0: disable, 1: enable.
          x-field-uid: 1
          x-astra-sim-name: ENABLE_QCN
        use_dynamic_pfc_threshold:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            0: disable, 1: enable.
          x-field-uid: 2
          x-astra-sim-name: USE_DYNAMIC_PFC_THRESHOLD
        packet_payload_size:
          type: integer
          format: uint32
          default: 1024
          description: |
            packet size (bytes).
          x-field-uid: 3
          x-astra-sim-name: PACKET_PAYLOAD_SIZE
        topology_file:
          type: string
          default: nc-topology.txt
          description: |
            input file: topoology.
          x-field-uid: 4
          x-astra-sim-name: TOPOLOGY_FILE
        flow_file:
          type: string
          default: flow.txt
          description: |
            input file: flow to generate.
          x-field-uid: 5
          x-astra-sim-name: FLOW_FILE
        trace_file:
          type: string
          default: trace.txt
          description: |
            input file: nodes to monitor packet-level events (enqu, dequ, pfc, etc.), will be dumped to TRACE_OUTPUT_FILE.
          x-field-uid: 6
          x-astra-sim-name: TRACE_FILE
        trace_output_file:
          type: string
          default: trace_out.tr
          description: |
            output file: packet-level events (enqu, dequ, pfc, etc.).
          x-field-uid: 7
          x-astra-sim-name: TRACE_OUTPUT_FILE
        fct_output_file:
          type: string
          default: fct.txt
          description: |
            output file: flow completion time of different flows.
          x-field-uid: 8
          x-astra-sim-name: FCT_OUTPUT_FILE
        pfc_output_file:
          type: string
          default: pfc.txt
          description: |
            output file: result of PFC.
          x-field-uid: 9
          x-astra-sim-name: PFC_OUTPUT_FILE
        simulator_stop_time:
          type: number
          format: float
          default: 40000000000000.0
          description: |
            simulation stop time.
          x-field-uid: 10
          x-astra-sim-name: SIMULATOR_STOP_TIME
        cc_mode:
          type: integer
          default: 12
          description: |
            Specifying different CC. 1: DCQCN, 3: HPCC, 7: TIMELY, 8: DCTCP, 10: HPCC-PINT.
          x-field-uid: 11
          x-astra-sim-name: CC_MODE
        alpha_resume_interval:
          type: integer
          format: uint32
          default: 1
          description: |
            for DCQCN: the interval of update alpha.
          x-field-uid: 12
          x-astra-sim-name: ALPHA_RESUME_INTERVAL
        rate_decrease_interval:
          type: integer
          format: uint32
          default: 4
          description: |
            for DCQCN: the interval of rate decrease.
          x-field-uid: 13
          x-astra-sim-name: RATE_DECREASE_INTERVAL
        clamp_target_rate:
          type: integer
          format: uint32
          default: 0
          description: |
            for DCQCN: whether to reduce target rate upon consecutive rate decrease.
          x-field-uid: 14
          x-astra-sim-name: CLAMP_TARGET_RATE
        rp_timer:
          type: integer
          format: uint32
          default: 900
          description: |
            for DCQCN: the interval of rate increase.
          x-field-uid: 15
          x-astra-sim-name: RP_TIMER
        ewma_gain:
          type: number
          format: float
          default: 0.00390625
          description: |
            for DCQCN and DCTCP: the gain of EWMA.
          x-field-uid: 16
          x-astra-sim-name: EWMA_GAIN
        fast_recovery_times:
          type: integer
          format: uint32
          default: 1
          description: |
            for DCQCN: number of times of increase for fast recovery.
          x-field-uid: 17
          x-astra-sim-name: FAST_RECOVERY_TIMES
        rate_ai:
          type: string
          default: 50Mb/s
          description: |
            Additive increase (not for DCTCP).
          x-field-uid: 18
          x-astra-sim-name: RATE_AI
        rate_hai:
          type: string
          default: 100Mb/s
          description: |
            Hyper additive increase.
          x-field-uid: 19
          x-astra-sim-name: RATE_HAI
        min_rate:
          type: string
          default: 100Mb/s
          description: |
            Minimum rate.
          x-field-uid: 20
          x-astra-sim-name: MIN_RATE
        dctcp_rate_ai:
          type: string
          default: 1000Mb/s
          description: |
            Additive increase for DCTCP.
          x-field-uid: 21
          x-astra-sim-name: DCTCP_RATE_AI
        error_rate_per_link:
          type: number
          format: float
          default: 0.0
          description: |
            Error rate of each link.
          x-field-uid: 22
          x-astra-sim-name: ERROR_RATE_PER_LINK
        l2_chunk_size:
          type: integer
          format: uint32
          default: 4000
          description: |
            for DCQCN: chunk size.
          x-field-uid: 23
          x-astra-sim-name: L2_CHUNK_SIZE
        l2_ack_interval:
          type: integer
          format: uint32
          default: 1
          description: |
            number of packets between ACK generation, 1 means per packet.
          x-field-uid: 24
          x-astra-sim-name: L2_ACK_INTERVAL
        l2_back_to_zero:
          type: integer
          minimum: 0
          maximum: 1
          default: 0
          description: |
            0: go-back-0, 1: go-back-N.
          x-field-uid: 25
          x-astra-sim-name: L2_BACK_TO_ZERO
        has_win:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            0: no window, 1: has a window.
          x-field-uid: 26
          x-astra-sim-name: HAS_WIN
        global_t:
          type: integer
          minimum: 0
          maximum: 1
          default: 0
          description: |
            0: different server pairs use their own RTT as T, 1: use the max base RTT as the global T.
          x-field-uid: 27
          x-astra-sim-name: GLOBAL_T
        var_win:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            0: fixed size of window (alwasy maximum), 1: variable window.
          x-field-uid: 28
          x-astra-sim-name: VAR_WIN
        fast_react:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            0: react once per RTT, 1: react per ACK.
          x-field-uid: 29
          x-astra-sim-name: FAST_REACT
        u_target:
          type: number
          format: float
          default: 0.95
          description: |
            for HPCC: eta in paper.
          x-field-uid: 30
          x-astra-sim-name: U_TARGET
        mi_thresh:
          type: integer
          format: uint32
          default: 0
          description: |
            for HPCC: eta in paper.
          x-field-uid: 31
          x-astra-sim-name: MI_THRESH
        int_multi:
          type: integer
          format: uint32
          default: 1
          description: |
            for HPCC: multiply the unit of txBytes and qLen in INT header.
          x-field-uid: 32
          x-astra-sim-name: INT_MULTI
        multi_rate:
          type: integer
          minimum: 0
          maximum: 1
          default: 0
          description: |
            for HPCC: 0: one rate for all hops, 1: one rate per hop.
          x-field-uid: 33
          x-astra-sim-name: MULTI_RATE
        sample_feedback:
          type: integer
          minimum: 0
          maximum: 1
          default: 0
          description: |
            for HPCC: 0: get INT per packet, 1: get INT once per RTT or qlen>0.
          x-field-uid: 34
          x-astra-sim-name: SAMPLE_FEEDBACK
        pint_log_base:
          type: number
          format: float
          default: 1.05
          description: |
            for HPCC-PINT: the base of the log encoding, equals to (1+epsilon)^2 where epsilon is the error bound. 1.05 corresponds to epsilon=0.025.
          x-field-uid: 35
          x-astra-sim-name: PINT_LOG_BASE
        pint_prob:
          type: number
          format: float
          default: 1.0
          description: |
            for HPCC-PINT: the base of the log encoding, equals to (1+epsilon)^2 where epsilon is the error bound. 1.05 corresponds to epsilon=0.025.
          x-field-uid: 36
          x-astra-sim-name: PINT_PROB
        rate_bound:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            0: no rate limitor, 1: use rate limitor.
          x-field-uid: 37
          x-astra-sim-name: RATE_BOUND
        ack_high_prio:
          type: integer
          minimum: 0
          maximum: 1
          default: 0
          description: |
            0: ACK has same priority with data packet, 1: prioritize ACK.
          x-field-uid: 38
          x-astra-sim-name: ACK_HIGH_PRIO
        link_down:
          type: array
          items:
            type: integer
            format: uint32
          minItems: 1
          maxItems: 3
          default:
          - 0
          - 0
          - 0
          description: |
            a b c: take down link between b and c at time a. 0 0 0 mean no link down.
          x-field-uid: 39
          x-astra-sim-name: LINK_DOWN
        enable_trace:
          type: integer
          minimum: 0
          maximum: 1
          default: 1
          description: |
            dump packet-level events or not.
          x-field-uid: 40
          x-astra-sim-name: ENABLE_TRACE
        kmax_map:
          type: string
          default: 6 25000000000 400 40000000000 800 100000000000 1600 200000000000
            2400 400000000000 3200 2400000000000 3200
          description: |
            a map from link bandwidth to ECN threshold kmax.
          x-field-uid: 41
          x-astra-sim-name: KMAX_MAP
        kmin_map:
          type: string
          default: 6 25000000000 100 40000000000 200 100000000000 400 200000000000
            600 400000000000 800 2400000000000 800
          description: |
            a map from link bandwidth to ECN threshold kmin.
          x-field-uid: 42
          x-astra-sim-name: KMIN_MAP
        pmax_map:
          type: string
          default: 6 25000000000 0.2 40000000000 0.2 100000000000 0.2 200000000000
            0.2 400000000000 0.2 2400000000000 0.2
          description: |
            a map from link bandwidth to ECN threshold pmax.
          x-field-uid: 43
          x-astra-sim-name: PMAX_MAP
        buffer_size:
          type: integer
          format: uint32
          default: 32
          description: |
            buffer size per switch.
          x-field-uid: 44
          x-astra-sim-name: BUFFER_SIZE
        qlen_mon_file:
          type: string
          default: qlen.txt
          description: |
            buffer size per switch.
          x-field-uid: 45
          x-astra-sim-name: QLEN_MON_FILE
        qlen_mon_start:
          type: integer
          format: int64
          default: 0
          description: |
            start time of dumping qlen.
          x-field-uid: 46
          x-astra-sim-name: QLEN_MON_START
        qlen_mon_end:
          type: integer
          format: int64
          default: 20000
          description: |
            end time of dumping qlen.
          x-field-uid: 47
          x-astra-sim-name: QLEN_MON_END
        nic_total_pause_time:
          type: integer
          format: int32
          default: 0
          description: |
            nic pause time.
          x-field-uid: 48
          x-astra-sim-name: NIC_TOTAL_PAUSE_TIME
    HTSim.Configuration:
      type: object
      description: |-
        Allows the end user to configure the HTSim backend. Users can select the HTSim protocol (e.g., TCP, RoCE) along with its schema-specific options, and define the network topology. For topology, users can either provide an infragraph from the global configuration or choose a network configuration schema, which has analytical network config and predefined schemas for topologies such as fat-tree and others.
      properties:
        htsim_protocol:
          $ref: '#/components/schemas/HTSim.Protocol'
          description: |-
            The network protocol required to run simulation.
          x-field-uid: 1
        topology:
          $ref: '#/components/schemas/HTSim.Topology.Options'
          description: |-
            HTSim topology - a choice between infragraph and HTSim network and topology configuration.
          x-field-uid: 2
    HTSim.Topology.Options:
      type: object
      description: |-
        Provides a choice between infragraph and HTSim network configuration with topology. If HTSim topology is selected, users can define analytical network configurations or choose HTSim-specific topologies such as fat-tree or dragonfly from the schema. If infragraph is selected, users can provide an infragraph from the global configuration, which the server will translate into an HTSim network configuration and topology.
      properties:
        choice:
          description: |-
            Specifies the choice between HTSim network configuration and infragraph.
          type: string
          x-field-uid: 1
          x-enum:
            network_topology_configuration:
              x-field-uid: 1
            infragraph:
              x-field-uid: 2
          enum:
          - network_topology_configuration
          - infragraph
        network_topology_configuration:
          $ref: '#/components/schemas/HTSim.Network.Configuration'
          x-field-uid: 2
    HTSim.Network.Configuration:
      type: object
      properties:
        network:
          type: array
          items:
            $ref: '#/components/schemas/Analytical.Topology.Network'
          minimum: 1
          maximum: 3
          x-field-uid: 1
        htsim_topology:
          $ref: '#/components/schemas/HTSim.Topology'
          x-field-uid: 2
          x-astra-sim-name: -topo
          x-astra-sim-type: cmd
    HTSim.Topology:
      type: object
      x-astra-sim-type: schema
      description: |-
        The HTSim network simulator provides a rich collection of datacenter network topologies designed for evaluating transport protocols and congestion control algorithms.
      properties:
        choice:
          description: |-
            This setting allows users to select the topology definition. The users can choose from various predefined topologies such as fat tree, dragonfly, and others directly within the HTSim topology configuration.
          type: string
          x-field-uid: 1
          x-enum:
            fat_tree:
              x-field-uid: 1
          enum:
          - fat_tree
        fat_tree:
          $ref: '#/components/schemas/HTSim.Topology.FatTree'
          x-field-uid: 2
    HTSim.Topology.FatTree:
      properties:
        nodes:
          type: integer
          format: int32
          description: |-
            The total number of nodes in a topology.
          x-field-uid: 1
        tiers:
          type: integer
          format: int32
          description: |-
            The total number of tiers in a topology.
          minimum: 2
          maximum: 3
          x-field-uid: 2
        podsize:
          type: integer
          format: int32
          description: |-
            The total podsize in a topology.
          x-field-uid: 3
        tier_0:
          $ref: '#/components/schemas/HTSim.Topology.FatTree.Tier'
          x-field-uid: 4
        tier_1:
          $ref: '#/components/schemas/HTSim.Topology.FatTree.Tier'
          x-field-uid: 5
        tier_2:
          $ref: '#/components/schemas/HTSim.Topology.FatTree.Tier2'
          x-field-uid: 6
    HTSim.Topology.FatTree.Tier2:
      properties:
        downlink_speed_gbps:
          type: integer
          format: int32
          description: |-
            The downlink speed of the tier, measured in gigabits per second (Gbps).
          x-field-uid: 2
        radix_down:
          type: integer
          format: int32
          description: |-
            The count of downlink ports available in the given tier.
          x-field-uid: 4
        queue_down:
          type: integer
          format: int32
          description: |-
            The number of downlink queues assigned for this tier.
          x-field-uid: 6
        oversubscribed:
          type: integer
          format: int32
          description: |-
            The oversubscription ratio configured for this tier.
          x-field-uid: 7
        bundle:
          type: integer
          format: int32
          description: |-
            The count of port bundles configured for this tier.
          x-field-uid: 8
        switch_latency_ns:
          type: integer
          format: int32
          description: |-
            The switch latency within the tier, measured in nanoseconds.
          x-field-uid: 9
        downlink_latency_ns:
          type: integer
          format: int32
          description: |-
            The latency on the downlink ports of the tier, measured in nanoseconds.
          x-field-uid: 10
    HTSim.Topology.FatTree.Tier:
      properties:
        downlink_speed_gbps:
          type: integer
          format: int32
          description: |-
            The downlink speed of the tier, measured in gigabits per second (Gbps).
          x-field-uid: 2
        radix_up:
          type: integer
          format: int32
          description: |-
            The count of uplink ports available in the given tier.
          x-field-uid: 3
        radix_down:
          type: integer
          format: int32
          description: |-
            The count of downlink ports available in the given tier.
          x-field-uid: 4
        queue_up:
          type: integer
          format: int32
          description: |-
            The number of uplink queues assigned for this tier.
          x-field-uid: 5
        queue_down:
          type: integer
          format: int32
          description: |-
            The number of downlink queues assigned for this tier.
          x-field-uid: 6
        oversubscribed:
          type: integer
          format: int32
          description: |-
            The oversubscription ratio configured for this tier.
          x-field-uid: 7
        bundle:
          type: integer
          format: int32
          description: |-
            The count of port bundles configured for this tier.
          x-field-uid: 8
        switch_latency_ns:
          type: integer
          format: int32
          description: |-
            The switch latency within the tier, measured in nanoseconds.
          x-field-uid: 9
        downlink_latency_ns:
          type: integer
          format: int32
          description: |-
            The latency on the downlink ports of the tier, measured in nanoseconds.
          x-field-uid: 10
    HTSim.Protocol:
      type: object
      properties:
        choice:
          description: |-
            The type of protocol backend: tcp, roce, etc.
          type: string
          x-field-uid: 1
          x-enum:
            tcp:
              x-field-uid: 1
          enum:
          - tcp
        tcp:
          $ref: '#/components/schemas/HTSim.Protocol.Tcp'
          x-field-uid: 2
    HTSim.Protocol.Tcp:
      type: object
      x-astra-sim-type: schema
      description: |-
        Enables users to define a configurable TCP schema for HTSim, allowing selection of the specific TCP protocol variant (such as UNCOUPLED, EPSILON, and others) to be simulated. The schema also lets users specify the associated network topology file that dictates the structure and path layout for the simulation. This flexible configuration supports in-depth experimentation with different TCP behaviors and network topologies within HTSim.
      properties:
        o:
          type: string
          x-field-uid: 1
          x-astra-sim-name: -o
          x-astra-sim-type: cmd
        sub:
          type: string
          x-field-uid: 2
          x-astra-sim-name: -sub
          x-astra-sim-type: cmd
        nodes:
          type: string
          x-field-uid: 3
          x-astra-sim-name: -nodes
          x-astra-sim-type: cmd
        tcp_protocol:
          type: string
          description: |-
            Specifies the TCP protocol variant to use in the simulation. Supported values include UNCOUPLED, COUPLED_INC, COUPLED_TCP, COUPLED_SCALABLE_TCP, and COUPLED_EPSILON, each representing a distinct congestion control or coupling approach within HTSim.
          enum:
          - UNCOUPLED
          - COUPLED_INC
          - COUPLED_TCP
          - COUPLED_SCALABLE_TCP
          - COUPLED_EPSILON
          x-field-uid: 4
          x-astra-sim-name: n/a
          x-astra-sim-type: cmd
    Infrastructure:
      type: object
      properties:
        name:
          description: |-
            The name of the infrastructure.
            Globally unique name of an object. It also serves as the primary key for arrays of objects.
          x-field-uid: 1
          type: string
          pattern: ^[\sa-zA-Z0-9-_()><\[\]]+$
          x-unique: global
        description:
          description: |-
            A detailed description of the infrastructure.
          type: string
          x-field-uid: 2
        devices:
          description: |-
            An inventory of devices and components.
          type: array
          items:
            $ref: '#/components/schemas/Device'
          x-field-uid: 3
        links:
          description: |-
            An inventory of the links present in the infrastructure edges.
          type: array
          items:
            $ref: '#/components/schemas/Link'
          x-field-uid: 4
        instances:
          description: |-
            An inventory of the device instances present in the infrastructure edges.
          type: array
          items:
            $ref: '#/components/schemas/Instance'
          x-field-uid: 5
        edges:
          description: |-
            An array of edge objects used to connect instance devices and components to other instance
            devices and components. These edge objects are used to form a fully qualified qualified graph.
          type: array
          items:
            $ref: '#/components/schemas/Infrastructure.Edge'
          x-field-uid: 6
    Device:
      description: |-
        A subgraph container for a device and its components, links and edges.
        The edges form a subgraph of the device.
      type: object
      required:
      - name
      - components
      - links
      - edges
      properties:
        name:
          description: |-
            The name of the device being described.
            Globally unique name of an object. It also serves as the primary key for arrays of objects.
          x-field-uid: 1
          type: string
          pattern: ^[\sa-zA-Z0-9-_()><\[\]]+$
          x-unique: global
        description:
          description: |-
            A description of the device.
            This will not be used in Infrastructure.connections.
          type: string
          x-field-uid: 2
        components:
          type: array
          items:
            $ref: '#/components/schemas/Component'
          x-field-uid: 3
        links:
          description: |-
            All the links that make up this device.
          type: array
          items:
            $ref: '#/components/schemas/Link'
          x-field-uid: 4
        edges:
          description: |-
            An array of edges that are used to produce a device graph.
            These are used to connect components to each other or components
            to other device components (composability).
            The generated graph edges will be fully qualified using the count property
            of the device and component and slice notation of each endpoint in the edge object.
          type: array
          items:
            $ref: '#/components/schemas/Device.Edge'
          x-field-uid: 5
    Component.Custom:
      description: |-
        Placeholder for a component that can be extended.
      type: object
      required:
      - type
      properties:
        type:
          description: |-
            This property will be added to the graph node in the form of a `type = value` attribute.
          type: string
          x-field-uid: 1
    Component.Device:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component.Cpu:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component.Npu:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component.Nic:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component.Memory:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component.Port:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component.Switch:
      description: |-
        Placeholder for a component that can be extended.
      type: object
    Component:
      description: |-
        A container for describing a component.
        A Component is contained in a Device.
      type: object
      required:
      - name
      - count
      - choice
      properties:
        name:
          x-field-uid: 1
          description: |-
            Globally unique name of an object. It also serves as the primary key for arrays of objects.
          type: string
          pattern: ^[\sa-zA-Z0-9-_()><\[\]]+$
          x-unique: global
        description:
          description: |-
            A description of the component.
          type: string
          x-field-uid: 2
        count:
          description: |-
            The maxiumim number of this component that will be contained by a single device instance.
            This property is used by the infragraph service in edge generation.
          type: integer
          format: int32
          x-field-uid: 3
        choice:
          description: |-
            The type of component.

            The `choice` value will be added to the graph node in the form of a `type = value` attribute.

            - `custom` If the type of a component is not listed as a choice it can be defined using the custom object which includes a type property that allows for a custom type attribute on the graph node.
            - `device` This enum allows a device to be composed of other devices. When this enum is selected the name of the component MUST be the name of a device that exists in the Infrastructure.devices array.
            - `cpu` A high level definition for a cpu
            - `npu` A high level definition for a neural processing unit
            - `nic` A high level definition for a network interface card, for more detailed breakdowns create a device representing a specific type network interface card
            - `memory` A high level definition for memory
            - `port` A high level definitiion for an IO port
            - `switch` A high level definition for an internal switch connecting components
          type: string
          x-field-uid: 4
          x-enum:
            custom:
              x-field-uid: 1
            device:
              x-field-uid: 2
            cpu:
              x-field-uid: 3
            npu:
              x-field-uid: 4
            nic:
              x-field-uid: 5
            memory:
              x-field-uid: 6
            port:
              x-field-uid: 7
            switch:
              x-field-uid: 8
          enum:
          - custom
          - device
          - cpu
          - npu
          - nic
          - memory
          - port
          - switch
        custom:
          $ref: '#/components/schemas/Component.Custom'
          x-field-uid: 10
        device:
          $ref: '#/components/schemas/Component.Device'
          x-field-uid: 11
        cpu:
          $ref: '#/components/schemas/Component.Cpu'
          x-field-uid: 12
        npu:
          $ref: '#/components/schemas/Component.Npu'
          x-field-uid: 13
        nic:
          $ref: '#/components/schemas/Component.Nic'
          x-field-uid: 14
        memory:
          $ref: '#/components/schemas/Component.Memory'
          x-field-uid: 15
        port:
          $ref: '#/components/schemas/Component.Port'
          x-field-uid: 16
        switch:
          $ref: '#/components/schemas/Component.Switch'
          x-field-uid: 17
    Link.Physical.Bandwidth:
      description: |-
        A container for specific Link physical Properties.
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            gigabits_per_second:
              x-field-uid: 1
            gigabytes_per_second:
              x-field-uid: 2
            gigatransfers_per_second:
              x-field-uid: 3
          enum:
          - gigabits_per_second
          - gigabytes_per_second
          - gigatransfers_per_second
        gigabits_per_second:
          description: |-
            Gigabits per second.
          type: number
          x-field-uid: 2
        gigabytes_per_second:
          description: |-
            Gigabytes per second.
          type: number
          x-field-uid: 3
        gigatransfers_per_second:
          description: |-
            Gigatrasfers per second.
          type: number
          x-field-uid: 4
    Link.Physical.Latency:
      description: |-
        A container for specific Link latency properties.
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            ms:
              x-field-uid: 1
            us:
              x-field-uid: 2
            ns:
              x-field-uid: 3
          enum:
          - ms
          - us
          - ns
        ms:
          description: |-
            Latency in milliseconds
          type: number
          x-field-uid: 2
        us:
          description: |-
            Latency in microseconds.
          type: number
          x-field-uid: 3
        ns:
          description: |-
            Latency in nanoseconds.
          type: number
          x-field-uid: 4
    Link.Physical:
      type: object
      properties:
        bandwidth:
          $ref: '#/components/schemas/Link.Physical.Bandwidth'
          x-field-uid: 1
        latency:
          $ref: '#/components/schemas/Link.Physical.Latency'
          x-field-uid: 2
    Link:
      description: |-
        A container for describing a link used between components.
      type: object
      required:
      - name
      properties:
        name:
          x-field-uid: 1
          description: |-
            Globally unique name of an object. It also serves as the primary key for arrays of objects.
          type: string
          pattern: ^[\sa-zA-Z0-9-_()><\[\]]+$
          x-unique: global
        description:
          description: |-
            A description of the type of link.
          type: string
          x-field-uid: 2
        physical:
          description: |-
            A container for physical properties.
          $ref: '#/components/schemas/Link.Physical'
          x-field-uid: 3
    Device.Endpoint:
      type: object
      required:
      - component
      properties:
        device:
          description: |-
            An optional name of a device that contains the component.
            If the property is empty the name of the device is the parent of the edge object.
            An endpoint will be generated for every device based on the count.
          type: string
          x-field-uid: 1
        component:
          description: |-
            The name of a component that exists in the containing device
            and the indexes of the component.

            The indexes MUST be specified using python slice notation.
              - example: cx5[0:2]
          type: string
          x-field-uid: 2
    Infrastructure.Endpoint:
      type: object
      required:
      - instance
      - component
      properties:
        instance:
          description: |-
            A name that matches the Instance.name property of an instance object that MUST exist in the infrastructure instances array.

            The instance object yields:
              - a device name that contains the component and MUST exist in the infrastructure devices
              - a count that is the maximum to be used in the slice notation

            The indexes MUST be specified using python slice notation.
              - example: host[0:2]
          type: string
          x-field-uid: 1
        component:
          description: |-
            The name of a component that MUST exist in the Instance.device specified by the instance object in the Infrastructure.instances array.

            The indexes MUST be specified using python slice notation.
              - example: npu[0:2]
          type: string
          x-field-uid: 2
    Infrastructure.Edge:
      type: object
      required:
      - ep1
      - ep2
      - link
      properties:
        ep1:
          description: |-
            A device and component that is one endpoint of the edge
          $ref: '#/components/schemas/Infrastructure.Endpoint'
          x-field-uid: 1
        ep2:
          description: |-
            A device and component that is the other endpoint of the edge
          required:
          - device
          - component
          $ref: '#/components/schemas/Infrastructure.Endpoint'
          x-field-uid: 2
        scheme:
          x-field-uid: 3
          description: |-
            The scheme that will be used to create edges between the endpoints ep1 and ep2.
          type: string
          x-enum:
            one2one:
              x-field-uid: 1
            many2many:
              x-field-uid: 2
            ring:
              x-field-uid: 3
          enum:
          - one2one
          - many2many
          - ring
        link:
          description: |-
            The name of a link that defines additional characteristics of the edge.
            The name MUST exist in the links array of the infrastructure.
          type: string
          x-field-uid: 4
    Device.Edge:
      type: object
      required:
      - ep1
      - ep2
      - link
      properties:
        ep1:
          description: |-
            An optional device and component that is the other endpoint of the edge
          $ref: '#/components/schemas/Device.Endpoint'
          x-field-uid: 1
        ep2:
          description: |-
            An optional device and component that is the other endpoint of the edge
          $ref: '#/components/schemas/Device.Endpoint'
          x-field-uid: 2
        scheme:
          x-field-uid: 3
          description: |-
            The scheme that will be used to create edges between the endpoints ep1 and ep2.
          type: string
          x-enum:
            one2one:
              x-field-uid: 1
            many2many:
              x-field-uid: 2
            ring:
              x-field-uid: 3
          enum:
          - one2one
          - many2many
          - ring
        link:
          description: |-
            The name of a link that defines additional characteristics of the edge.
            The name MUST exist in the links array of the containing device.
          type: string
          x-field-uid: 4
    Instance:
      type: object
      required:
      - name
      - device
      - count
      properties:
        name:
          description: |-
            An alias for the device that MUST be used in the Infrastructure edge object.
            Globally unique name of an object. It also serves as the primary key for arrays of objects.
          x-field-uid: 1
          type: string
          pattern: ^[\sa-zA-Z0-9-_()><\[\]]+$
          x-unique: global
        description:
          description: |-
            A description of the instance.
          type: string
          x-field-uid: 2
        device:
          description: |-
            The name of a device that MUST exist in the array of Infrastructure devices.
          type: string
          x-field-uid: 3
        count:
          description: |-
            The maximum number of instances that will be created as nodes in the graph.

            Not all the instances need to be used in the graph edges.
          type: integer
          format: int32
          x-field-uid: 4
    Annotations:
      type: object
      description: |-
        Container for link and device specifications annotations
      properties:
        link_specifications:
          type: array
          items:
            $ref: '#/components/schemas/Annotation.Link.Specifications'
          x-field-uid: 1
        device_specifications:
          type: array
          items:
            $ref: '#/components/schemas/Annotation.Device.Specifications'
          x-field-uid: 2
        rank_assignment:
          type: array
          items:
            $ref: '#/components/schemas/Annotation.Rank.Assignment'
          x-field-uid: 3
    Annotation.Link.Specifications:
      type: object
      description: |-
        The link specifications including name, packet loss, and error rates
      properties:
        link_name:
          type: string
          description: |-
            The name of the device defined in infragraph
          x-field-uid: 1
        packet_loss_rate:
          type: number
          format: float
          description: |-
            The packet loss rate on the link as a percentage
          x-field-uid: 2
        link_error_rate:
          type: number
          format: float
          description: |-
            The link error rate indicating transmission errors
          x-field-uid: 3
    Annotation.Device.Specifications:
      type: object
      description: |-
        Specifications of a device including its name, type, latency, bandwidth, and queue details
      properties:
        device_name:
          type: string
          description: |-
            The name of the device defined in infragraph
          x-field-uid: 1
        device_type:
          type: string
          enum:
          - host
          - switch
          description: |-
            The type of device - host or switch
          x-field-uid: 2
        device_latency_ms:
          type: number
          format: float
          description: |-
            The latency of the device in milliseconds
          x-field-uid: 3
        device_bandwidth_gbps:
          type: number
          format: float
          description: |-
            The bandwidth capacity of the device in Gbps
          x-field-uid: 4
        radix_up:
          type: number
          format: int32
          description: |-
            Number of upward radix connections
          x-field-uid: 5
        radix_down:
          type: number
          format: int32
          description: |-
            Number of downward radix connections
          x-field-uid: 6
        queue_up:
          type: number
          format: int32
          description: |-
            Number of packets in the upward queue
          x-field-uid: 7
        queue_down:
          type: number
          format: int32
          description: |-
            Number of packets in the downward queue
          x-field-uid: 8
    Annotation.Rank.Assignment:
      type: object
      description: |-
        Specifications of rank assignment with the rank identifier and the npu identifier as device_instance.index.npu_component.index
      properties:
        rank_identifier:
          type: number
          format: int32
          description: |-
            The rank identifier of an NPU component
          x-field-uid: 1
        npu_identifier:
          type: string
          description: |-
            The npu identifier - given as device_instance.index.npu_component.index
          x-field-uid: 2
    Control:
      type: object
      description: |-
        Represents control operations for managing a network backend, including actions to start or stop the backend and retrieve its current status.
      properties:
        choice:
          description: |-
            Represents a control interface that allows users to choose between starting or stopping ASTRA-sim simulation. Only one action — start or stop— can be performed at a time. Users must specify either the configuration to start a backend or the command to stop it, ensuring that these actions are mutually exclusive within a single operation.
          type: string
          x-field-uid: 1
          x-enum:
            start:
              x-field-uid: 1
            stop:
              x-field-uid: 2
          enum:
          - start
          - stop
        start:
          description: |-
            Defines the configuration and action required to set the control to a specific network backend.
          $ref: '#/components/schemas/Control.Start'
          x-field-uid: 2
    Control.Start:
      type: object
      description: |-
        Specifies the operation to set control to a specific network backend, allowing the user to initiate an action on the selected backend.
      required:
      - backend
      properties:
        backend:
          type: string
          description: |-
            The name of the backend to control. This string must match one of the allowed backend names (as defined in the enumerated list), specifying which backend to activate or interact with.
          x-enum:
            analytical_congestion_aware:
              x-field-uid: 1
            analytical_congestion_unaware:
              x-field-uid: 2
            ns3:
              x-field-uid: 3
            htsim:
              x-field-uid: 4
            custom:
              x-field-uid: 100
          x-field-uid: 1
          enum:
          - analytical_congestion_aware
          - analytical_congestion_unaware
          - ns3
          - htsim
          - custom
    Control.Status:
      type: object
      description: |-
        Provides the status of the network backend or simulation, reflecting its current lifecycle state.
      properties:
        status:
          type: string
          x-enum:
            running:
              x-field-uid: 1
            completed:
              x-field-uid: 2
            failed:
              x-field-uid: 3
            terminated:
              x-field-uid: 4
            inactive:
              x-field-uid: 5
          x-field-uid: 1
          enum:
          - running
          - completed
          - failed
          - terminated
          - inactive
    Result:
      type: object
      description: |-
        Represents the result containing a collection of file metadata entries along with a single file metadata object.
      properties:
        choice:
          description: |-
            The type of result required: metadata or file.
          type: string
          x-field-uid: 1
          x-enum:
            metadata:
              x-field-uid: 1
            filename:
              x-field-uid: 2
          enum:
          - metadata
          - filename
        filename:
          type: string
          description: |-
            A single file metadata object describing filename which is associated with the result.
          x-field-uid: 2
    Version:
      description: |-
        Version details
      type: object
      properties:
        api_spec_version:
          description: |-
            Version of API specification
          type: string
          default: ''
          x-field-uid: 1
        sdk_version:
          description: |-
            Version of SDK generated from API specification
          type: string
          default: ''
          x-field-uid: 2
        app_version:
          description: |-
            Version of application consuming or serving the API
          type: string
          default: ''
          x-field-uid: 3
